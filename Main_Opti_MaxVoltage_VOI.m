close all; clear; clc;

global varMaxIter StartPosition StartOrientation ub lb funToSolve

% Define Original Position and orientation of the transmitter coils
StartPosition = 1*[-0.28  -0.28 0.58;...
    -0.28  -0.28 0.02;...
    0.28   0.28 0.58;...
    0.28   0.28 0.02;...
    -0.28   0.28 0.58;...
    -0.28   0.28 0.02;...
    0.28  -0.28 0.58;...
    0.28  -0.28 0.02];

% funToSolve = @outfun_PoseError_U_multiOri;
funToSolve = @outfun_PoseError_U_multiOri_mex;


StartOrientation = 1*[ 1 0 0;...
    1 0 -0;...
    1 0 0;...
    1 0 0;...
    1 0 0;...
    1 0 0;...
    1 0 0;...
    1 0 0];

searchRangeCoef = 1;

varMaxIter = 10000;

ub=searchRangeCoef*...
    [360 360 1 1 1;...
    360 360 1 1 1;...
    360 360 1 1 1;...
    360 360 1 1 1;...
    360 360 1 1 1;...
    360 360 1 1 1;...
    360 360 1 1 1;...
    360 360 1 1 1];

% Search uppper boundary
lb=searchRangeCoef*...
    [0 0 -1 -1 -1;...
    0 0 -1 -1 -1;...
    0 0 -1 -1 -1;...
    0 0 -1 -1 -1;...
    0 0 -1 -1 -1;...
    0 0 -1 -1 -1;...
    0 0 -1 -1 -1;...
    0 0 -1 -1 -1];

History=HistorySave_OptTranPose;
