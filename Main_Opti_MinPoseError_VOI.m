close all; clear; clc;

global varMaxIter StartPosition StartOrientation ub lb funToSolve

% Define Original Position and orientation of the transmitter coils
StartPosition = 1*[-0.28  -0.28 0.58;...
    -0.28  -0.28 0.02;...
    0.28   0.28 0.58;...
    0.28   0.28 0.02;...
    -0.28   0.28 0.58;...
    -0.28   0.28 0.02;...
    0.28  -0.28 0.58;...
    0.28  -0.28 0.02];

funToSolve = @outfun_PoseError_Pose_multiOri;
% StartPosition = 1*[-0.61  -0.61 1;...
%     -0.61  -0.61 -0.61;...
%     0.61   0.61 1;...
%     0.61   0.61 -0.61;...
%     -0.61   0.61 1;...
%     -0.61   0.61 -0.61;...
%     0.61  -0.61 1;...
%     0.61  -0.61 0];

StartOrientation = 1*[ 1 0 0;...
    1 0 -0;...
    1 0 0;...
    1 0 0;...
    1 0 0;...
    1 0 0;...
    1 0 0;...
    1 0 0];

searchRangeCoef = 1;

varMaxIter = 10000;

ub=searchRangeCoef*...
    [360 360 0.61 0.61 0.61;...
    360 360 0.61 0.61 0.61;...
    360 360 0.61 0.61 0.61;...
    360 360 0.61 0.61 0.61;...
    360 360 0.61 0.61 0.61;...
    360 360 0.61 0.61 0.61;...
    360 360 0.61 0.61 0.61;...
    360 360 0.61 0.61 0.61];

% Search uppper boundary
lb=searchRangeCoef*...
    [0 0 -0.61 -0.61 -0.61;...
    0 0 -0.61 -0.61 -0.61;...
    0 0 -0.61 -0.61 -0.61;...
    0 0 -0.61 -0.61 -0.61;...
    0 0 -0.61 -0.61 -0.61;...
    0 0 -0.61 -0.61 -0.61;...
    0 0 -0.61 -0.61 -0.61;...
    0 0 -0.61 -0.61 -0.61];

History=HistorySave_OptTranPose;
save;